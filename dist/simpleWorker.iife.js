var SimpleWorker=function(){"use strict";var e=function(e){return"function"===typeof e},r=function(e){return"self.onmessage = function (event) {\n  var args = event.data.args || []\n  var id = event.data.id\n  var result = ("+e+").apply(null, args)\n  self.postMessage({id: id, result: result})\n}"};return function(){function t(t){if(this.id=1,this.subs={},"Worker"in window)if(URL&&URL.createObjectURL){if(e(t)){var o=function(e){var r=new Blob([e],{type:"application/javascript"}),t=URL.createObjectURL(r);return{worker:new Worker(t),objURL:t}}(r(t)),n=o.worker,s=o.objURL;this.worker=n,this.objURL=s,function(e,r){e.onmessage=function(e){var t=e.data,o=t&&t.id;o&&r[o]&&(r[o][0](t.result),delete r[o])},e.onerror=function(e){Object.keys(r).forEach(function(t){r[t][1](e),delete r[t]})}}(this.worker,this.subs)}}else console.error("This browser does not have createObjectURL method.");else console.error("This browser does not support Worker.")}return t.prototype.run=function(){for(var e=this,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var o=this.worker;return new Promise(function(t,n){var s=e.id++;e.subs[s]=[t,n],o.postMessage({args:r,id:s})})},t.prototype.distory=function(){this.worker.terminate(),URL.revokeObjectURL(this.objURL),this.objURL=null,this.worker=null},t}()}();
